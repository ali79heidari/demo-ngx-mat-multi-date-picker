<div class="container">
  <mat-card class="demo-card">
    <mat-card-header>
      <mat-card-title>Angular Multi-Calendar Picker</mat-card-title>
      <mat-card-subtitle>Switch between Jalaali, Gregorian, and Hijri</mat-card-subtitle>
    </mat-card-header>
    <mat-card-content>

      <div class="controls">
        <mat-form-field appearance="outline">
          <mat-label>Select Calendar System</mat-label>
          <mat-select [(ngModel)]="calendarType" name="calendarType">
            @for (t of types; track t) {
              <mat-option [value]="t.value">
                {{ t.label }}
              </mat-option>
            }
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Start Day of Week</mat-label>
          <mat-select [(ngModel)]="startDay" name="startDay">
            @for (d of startDays; track d) {
              <mat-option [value]="d.value">
                {{ d.label }}
              </mat-option>
            }
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Weekend Holidays</mat-label>
          <mat-select [(ngModel)]="weekendDays" name="weekendDays" multiple>
            @for (d of daysOfWeek; track d) {
              <mat-option [value]="d.value">
                {{ d.label }}
              </mat-option>
            }
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Custom Gregorian Holidays (Format: YYYY-MM: D,D; ...)</mat-label>
          <input matInput [(ngModel)]="customHolidaysInput" name="customHolidaysInput">
          <mat-hint>Example: 2025-01: 1,3,4; 2025-12: 25</mat-hint>
        </mat-form-field>

        <section class="holiday-toggles">
          <h4>Highlight Official Holidays:</h4>
          <p><mat-checkbox [(ngModel)]="showGregorianHolidays">Gregorian</mat-checkbox></p>
          <p><mat-checkbox [(ngModel)]="showJalaaliHolidays">Jalaali (Solar)</mat-checkbox></p>
          <p><mat-checkbox [(ngModel)]="showHijriHolidays">Hijri (Lunar)</mat-checkbox></p>
        </section>
      </div>  

      <div class="picker-container">
        <ngx-multi-datepicker
          [label]="'Select Date (' + calendarType + ')'"
          [calendarType]="calendarType"
          [(value)]="dateValue"
          [startDay]="startDay"
          [weekendDays]="weekendDays"
          [customGregorianHolidays]="parsedCustomHolidays"
          [showGregorianHolidays]="showGregorianHolidays"
          [showJalaaliHolidays]="showJalaaliHolidays"
          [showHijriHolidays]="showHijriHolidays">
        </ngx-multi-datepicker>
      </div>

      @if (dateValue) {
        <div class="result-display">
          <h3>Selected Date Formats:</h3>
          <p><strong>Gregorian:</strong> {{ gregorianDate }}</p>
          <p><strong>Jalaali:</strong> {{ jalaaliDate }}</p>
          <p><strong>Hijri:</strong> {{ hijriDate }}</p>
          <p><strong>ISO:</strong> {{ dateValue.toISOString() }}</p>
        </div>
      }

    </mat-card-content>
  </mat-card>
</div>
